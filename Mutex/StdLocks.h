////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
// First-Pass at normal lock guards
// Author: Eli Pinkerton
// Date: 2/26/14
////////////////////////////////////////////////////////////////////////////////////////////////////

#pragma once

#include "../CacheLine.h"

#include <mutex>

namespace DX
{

    class Lock
    {
    public:
        Lock(std::mutex& _mutex);
        ~Lock();
    private:
        std::mutex* m_mutex;
    };

    ////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////
    // impl

    Lock::Lock(std::mutex& _mutex) : m_mutex(&_mutex)
    {
        m_mutex->lock();
    }

    Lock::~Lock()
    {
        m_mutex->unlock();
    }

}