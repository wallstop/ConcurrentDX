////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////
// First-Pass at normal lock guards
// Author: Eli Pinkerton
// Date: 2/26/14
////////////////////////////////////////////////////////////////////////////////////////////////////

#pragma once

#include "../CacheLine.h"

#include <mutex>

namespace DX
{

    class StdLock
    {
    public:
        StdLock(std::mutex& _mutex);
        ~StdLock();
    private:
        std::mutex* m_mutex;
    };

    ////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////
    // impl

    StdLock::StdLock(std::mutex& _mutex) : m_mutex(&_mutex)
    {
        if(m_mutex)
            m_mutex->lock();
    }

    StdLock::~StdLock()
    {
        if(m_mutex)
            m_mutex->unlock();
    }

}